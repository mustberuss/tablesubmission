<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Patentsview Data - 2022 Table Contest Entry â€¢ tablesubmission</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Patentsview Data - 2022 Table Contest Entry">
<meta property="og:description" content="tablesubmission">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tablesubmission</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/top.html">Patentsview Data - 2022 Table Contest Entry</a>
    </li>
    <li>
      <a href="../articles/top2.html">Patentsview Data - 2022 Table Contest Entry</a>
    </li>
    <li>
      <a href="../articles/top2.Rmd.html">Patentsview Data - 2022 Table Contest Entry</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="top2.Rmd_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="top2.Rmd_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="top2.Rmd_files/datatables-binding-0.25/datatables.js"></script><link href="top2.Rmd_files/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="top2.Rmd_files/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="top2.Rmd_files/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="top2.Rmd_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="top2.Rmd_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Patentsview Data - 2022 Table Contest Entry</h1>
                        <h4 data-toc-skip class="author">Russ Allen and
Chris Baker</h4>
            
            <h4 data-toc-skip class="date">2022-10-27</h4>
      
      
      <div class="hidden name"><code>top2.Rmd.Rmd</code></div>

    </div>

    
    
<style type="text/css">
table, table th, table td {
  border: none;
}
</style>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mustberuss.github.io/patentsview/index.html" class="external-link">patentsview</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jkunst.com/highcharter/" class="external-link">highcharter</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Registered S3 method overwritten by 'quantmod':</span></span>
<span><span class="co">##   method            from</span></span>
<span><span class="co">##   as.zoo.data.frame zoo</span></span></code></pre>
<pre><code><span><span class="co">## Highcharts (www.highcharts.com) is a Highsoft software product which is</span></span></code></pre>
<pre><code><span><span class="co">## not free for commercial and Governmental use</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT" class="external-link">DT</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With the recent API change that limits the overall result set size, we now look</span></span>
<span><span class="co"># for databases (plural) where we used to use the singular database for this vignette.</span></span>
<span><span class="co"># We also exclude patents without an assignee organization.</span></span>
<span></span>
<span><span class="co"># We first need to write a query. Our query will look for "databases" in either </span></span>
<span><span class="co"># the patent title or abstract...Note, this isn't a terribly good way to ID our </span></span>
<span><span class="co"># patents, but it will work for the purpose of demonstration. Users who are </span></span>
<span><span class="co"># interested in writing higher-quality queries could consult the large body of </span></span>
<span><span class="co"># research that has been done in field of patent document retrieval.</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/patentsview/man/with_qfuns.html" class="external-link">with_qfuns</a></span><span class="op">(</span></span>
<span>  <span class="fu">and</span><span class="op">(</span></span>
<span>     <span class="fu">neq</span><span class="op">(</span><span class="st">"assignees_at_grant.organization"</span> <span class="op">=</span> <span class="st">""</span><span class="op">)</span>,</span>
<span>     <span class="fu">or</span><span class="op">(</span></span>
<span>       <span class="fu">text_phrase</span><span class="op">(</span>patent_abstract <span class="op">=</span> <span class="st">"databases"</span><span class="op">)</span>,</span>
<span>       <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span>patent_title <span class="op">=</span> <span class="st">"databases"</span><span class="op">)</span></span>
<span>     <span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">query</span></span></code></pre></div>
<pre><code><span><span class="co">## {"_and":[{"_neq":{"assignees_at_grant.organization":""}},{"_or":[{"_text_phrase":{"patent_abstract":"databases"}},{"_contains":{"patent_title":"databases"}}]}]}</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; {"_and":[{"_neq":{"assignees_at_grant.organization":""}},{"_or":[{"_text_phrase":{"patent_abstract":"databases"}},{"_contains":{"patent_title":"databases"}}]}]}</span></span>
<span></span>
<span><span class="co"># Create a list of the fields we'll need for the analysis</span></span>
<span></span>
<span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"patent_number"</span>, <span class="st">"patent_date"</span>,<span class="st">"patent_year"</span>,</span>
<span>  <span class="st">"patent_num_us_patents_cited"</span>,</span>
<span>  <span class="st">"assignees_at_grant.organization"</span>,  <span class="co"># fulltext field now if used in q:</span></span>
<span>  <span class="st">"assignees_at_grant.assignee_id"</span>  <span class="co"># the assignee fields come back in a nested object</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Send an HTTP request to the PatentsView API to get the data</span></span>
<span><span class="va">pv_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/patentsview/man/search_pv.html" class="external-link">search_pv</a></span><span class="op">(</span><span class="va">query</span>, fields <span class="op">=</span> <span class="va">fields</span>, all_pages <span class="op">=</span> <span class="cn">TRUE</span>, per_page <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span></span>
<span>   delay <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Unnest the data frames that are stored in the assignee list column</span></span>
<span><span class="va">dl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/patentsview/man/unnest_pv_data.html" class="external-link">unnest_pv_data</a></span><span class="op">(</span><span class="va">pv_out</span><span class="op">$</span><span class="va">data</span>, <span class="st">"patent_number"</span><span class="op">)</span></span>
<span><span class="va">dl</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 2</span></span>
<span><span class="co">##  $ assignees_at_grant:'data.frame':  7150 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ patent_number: chr [1:7150] "4751635" ...</span></span>
<span><span class="co">##   ..$ assignee     : chr [1:7150] "https://search.patentsview.org/api/v1/assi"..</span></span>
<span><span class="co">##   ..$ organization : chr [1:7150] "Bell Communications Research, Inc." ...</span></span>
<span><span class="co">##  $ patents           :'data.frame':  7598 obs. of  4 variables:</span></span>
<span><span class="co">##   ..$ patent_number              : chr [1:7598] "4751635" ...</span></span>
<span><span class="co">##   ..$ patent_date                : chr [1:7598] "1988-06-14" ...</span></span>
<span><span class="co">##   ..$ patent_year                : int [1:7598] 1988 1988 ...</span></span>
<span><span class="co">##   ..$ patent_num_us_patents_cited: int [1:7598] 3 18 ...</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ assignees_at_grant:'data.frame':  7150 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;   ..$ patent_number: chr [1:7150] "4751635" ...</span></span>
<span><span class="co">#&gt;   ..$ assignee     : chr [1:7150] "https://search.patentsview.org/api/v1/assi"..</span></span>
<span><span class="co">#&gt;   ..$ organization : chr [1:7150] "Bell Communications Research, Inc." ...</span></span>
<span><span class="co">#&gt;  $ patents           :'data.frame':  7598 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;   ..$ patent_number              : chr [1:7598] "4751635" ...</span></span>
<span><span class="co">#&gt;   ..$ patent_date                : chr [1:7598] "1988-06-14" ...</span></span>
<span><span class="co">#&gt;   ..$ patent_year                : int [1:7598] 1988 1988 ...</span></span>
<span><span class="co">#&gt;   ..$ patent_num_us_patents_cited: int [1:7598] 3 18 ...</span></span>
<span></span>
<span><span class="co"># We shouldn't need the filter (we queried for non empty string orginazations) but</span></span>
<span><span class="co"># some are NA somehow</span></span>
<span></span>
<span><span class="co"># We don't get the assignee_total_num_patents back from the patents endpoint any longer.</span></span>
<span><span class="co"># We'll have to make a call to the assignee endpoint once we know who the top 75</span></span>
<span><span class="co"># assignees are.</span></span>
<span></span>
<span><span class="co"># Requested assignees_at_grant.assignee_id comes back in the assignees_at_grant object </span></span>
<span><span class="co"># with key "assignee" and value like https://search.patentsview.org/api/v1/assignee/35/</span></span>
<span><span class="co"># We want to parse out the assignee_ids (35 in the example value)</span></span>
<span></span>
<span><span class="co"># Create a data frame with the top 75 assignees:</span></span>
<span><span class="va">top_asgns</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">dl</span><span class="op">$</span><span class="va">assignees_at_grant</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">organization</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># some patents are assigned to an inventor (not an org)</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>assignee_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">".*/([0-9]+)/$"</span>, <span class="st">"\\1"</span>, <span class="va">assignee</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">organization</span>, <span class="va">assignee_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>db_pats <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">db_pats</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">75</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## `summarise()` has grouped output by 'organization'. You can override using the</span></span>
<span><span class="co">## `.groups` argument.</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Now that we have the assignee_id's we can call the assignee endpoint to get the</span></span>
<span><span class="co"># total number of patents for each of our top_asgns </span></span>
<span></span>
<span><span class="va">assignee_query</span> <span class="op">=</span>  <span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>assignee_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">top_asgns</span><span class="op">$</span><span class="va">assignee_id</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">assignee_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"assignee_id"</span>,<span class="st">"organization"</span>, <span class="st">"num_patents"</span> </span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># we'll post to the API, the query is a pretty large string (an "or" of 75 assignee_ids)</span></span>
<span><span class="va">assignee_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/patentsview/man/search_pv.html" class="external-link">search_pv</a></span><span class="op">(</span><span class="va">assignee_query</span> , fields <span class="op">=</span> <span class="va">assignee_fields</span>, all_pages <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>   per_page <span class="op">=</span> <span class="fl">1000</span>, endpoint <span class="op">=</span> <span class="st">"assignees"</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">assignee_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/patentsview/man/unnest_pv_data.html" class="external-link">unnest_pv_data</a></span><span class="op">(</span><span class="va">assignee_out</span><span class="op">$</span><span class="va">data</span>, <span class="st">"assignee_id"</span><span class="op">)</span></span>
<span><span class="va">assignee_counts</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 1</span></span>
<span><span class="co">##  $ assignees:'data.frame':   75 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ assignee_id : int [1:75] 3 6 ...</span></span>
<span><span class="co">##   ..$ organization: chr [1:75] "Xerox Corporation" ...</span></span>
<span><span class="co">##   ..$ num_patents : int [1:75] 23495 80931 ...</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ assignees:'data.frame':   75 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;   ..$ assignee_id : int [1:75] 3 6 ...</span></span>
<span><span class="co">#&gt;   ..$ organization: chr [1:75] "Xerox Corporation" ...</span></span>
<span><span class="co">#&gt;   ..$ num_patents : int [1:75] 23495 80931 ...</span></span>
<span></span>
<span><span class="co"># Here we redo top_asgns now that we have all the fields we need.</span></span>
<span><span class="co"># We join in the total counts and mutate in the percentages </span></span>
<span><span class="va">top_asgns</span> <span class="op">&lt;-</span> <span class="va">dl</span><span class="op">$</span><span class="va">assignees_at_grant</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">assignee_counts</span><span class="op">$</span><span class="va">assignees</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ttl_pats <span class="op">=</span> <span class="va">num_patents</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">organization</span>, <span class="va">ttl_pats</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>db_pats <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>frac_db_pats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">db_pats</span> <span class="op">/</span> <span class="va">ttl_pats</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">db_pats</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Joining, by = "organization"</span></span></code></pre>
<pre><code><span><span class="co">## `summarise()` has grouped output by 'organization'. You can override using the</span></span>
<span><span class="co">## `.groups` argument.</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create datatable</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">top_asgns</span>,</span>
<span>  rownames <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Assignee"</span>, <span class="st">"DB patents"</span>,<span class="st">"Total patents"</span>, <span class="st">"DB patents / total patents"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  caption <span class="op">=</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">tags</a></span><span class="op">$</span><span class="fu">caption</span><span class="op">(</span></span>
<span>    style <span class="op">=</span> <span class="st">'caption-side: top; text-align: left; font-style: italic;'</span>,</span>
<span>    <span class="st">"Table 1: Top assignees in 'databases'"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pageLength <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-12ffaaf0f80a7d311cba" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-12ffaaf0f80a7d311cba">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left; font-style: italic;\">Table 1: Top assignees in 'databases'<\/caption>","data":[["INTERNATIONAL BUSINESS MACHINES CORPORATION","Microsoft Technology Licensing, LLC","Oracle International Corporation","AT&amp;T Intellectual Property I, L.P.","SAP SE","EMC IP Holding Company LLC","Amazon Technologies, Inc.","LUCENT MEDICAL SYSTEMS, INC.","AS America, Inc.","CISCO TECHNOLOGY, INC.","AT&amp;T Technologies Incorporated","Hitachi, Ltd.","salesforce.com, inc.","SAP AG","Google LLC","Hewlett-Packard Development Company, L.P.","FUJITSU LIMITED","Palantir Technologies Inc.","Apple Inc.","Telefonaktiebolaget LM Ericsson (Publ)","Island Intellectual Property, LLC","BMC Software, Inc.","IN&amp;MOTION","ACCENTURE GLOBAL SOLUTIONS LIMITED","SIEMENS AKTIENGESELLSCHAFT","Delphix Corporation","Allstate Insurance Company","YAHOO HOLDINGS, INC.","General Electric Company","SYBASE, INC.","Xerox Corporation","SONY CORPORATION","JPMORGAN CHASE BANK, N.A.","Dell Products L.P.","Intel Corporation","ServiceNow, Inc.","Sun Microsystems Inc.","i2 Technologies US, Inc.","Red Hat, Inc.","NCR Corporation","Nortel Networks S.A.","Sprint Communications Company L.P.","Teradata US, Inc.","The Board of Trustees of the Leland Stanford Junior University","NEC CORPORATION","Nokia Technologies Oy","THE REGENTS OF THE UNIVERSITY OF CALIFORNIA","AMERICAN EXPRESS TRAVEL RELATED SERVICES COMPANY, INC.","MASSACHUSETTS MUTUAL LIFE INSURANCE COMPANY","Ricoh Company, Ltd.","Symantec Corporation","THE BOEING COMPANY","Alcatel Lucent","CAREFUSION 303, INC.","Koninklijke Philips N.V.","ORACLE AMERICA, INC.","PalmSource Inc.","Pivotal Software, Inc.","Unisys Corporation","Bell Atlantic Network Services","Facebook, Inc.","Honeywell International Inc.","Kayak Software Corporation","MongoDB, Inc.","UNITED SERVICES AUTOMOBILE ASSOCIATION (USAA)","UNIVERSITY OF TENNESSEE RESEARCH FOUNDATION","3Com Corporation","Canon Kabushiki Kaisha","Kabushiki Kaisha Toshiba","Motorola Solutions, Inc.","Oracle Systems Corporation","REDKNEE INC.","CADENCE DESIGN SYSTEMS, INC.","Capital One Services, LLC","Ciena Corporation"],[743,321,166,93,91,73,68,55,54,53,52,49,45,45,44,43,41,40,36,34,32,27,27,26,26,25,24,24,23,23,23,22,21,20,20,20,20,19,19,18,18,18,18,18,17,17,17,16,16,15,15,15,14,14,14,14,14,14,14,13,13,13,13,13,13,13,12,12,12,12,12,12,11,11,11],[150818,47743,8336,16621,3844,9796,15802,9434,4320,16856,4755,43825,2627,3648,24831,37773,39228,899,26445,19732,70,395,4509,2272,31086,35,652,2464,49684,344,23495,57152,1083,6891,46429,551,7630,198,2439,4284,4161,3700,511,4226,32150,11863,13175,1156,212,26504,3069,18957,6284,491,18383,1921,153,186,2431,306,6849,13469,26,52,1657,2624,1516,80931,53683,22101,470,61,2248,2278,1499],[0.005,0.007,0.02,0.006,0.024,0.007,0.004,0.006,0.013,0.003,0.011,0.001,0.017,0.012,0.002,0.001,0.001,0.044,0.001,0.002,0.457,0.068,0.006,0.011,0.001,0.714,0.037,0.01,0,0.067,0.001,0,0.019,0.003,0,0.036,0.003,0.096,0.008,0.004,0.004,0.005,0.035,0.004,0.001,0.001,0.001,0.014,0.075,0.001,0.005,0.001,0.002,0.029,0.001,0.007,0.092,0.075,0.006,0.042,0.002,0.001,0.5,0.25,0.008,0.005,0.008,0,0,0.001,0.026,0.197,0.005,0.005,0.007]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Assignee<\/th>\n      <th>DB patents<\/th>\n      <th>Total patents<\/th>\n      <th>DB patents / total patents<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[1,2,3]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
